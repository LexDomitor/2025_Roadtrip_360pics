<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>360 Test</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.css">
<style>
    html, body {
        margin:0;
        padding:0;
        background:black;
        width:100%;
        height:100%;
        overflow:hidden;
        user-select:none;
    }
    #viewer {
        width:100vw;
        height:100vh;
    }
</style>
</head>
<body>

<div id="viewer"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.js"></script>

<script>
// *** YOUR IMAGE, but routed through JSDelivr (fixes GitHub CORS) ***
const panoramaURL =
  "https://cdn.jsdelivr.net/gh/lexdomitor/2025_Roadtrip_360pics/halfmoonbay4k360.jpg";

// Debug
console.log("Attempting to load through CDN:", panoramaURL);

// Preload check
const img = new Image();
img.crossOrigin = "anonymous";
img.onload = function () {
    console.log("Image loaded OK. Launching viewer.");

    new PhotoSphereViewer.Viewer({
        container: document.querySelector('#viewer'),
        panorama: panoramaURL,
        withCredentials: false,
        mousewheel: true,
        navbar: ['zoom', 'fullscreen']
    });
};

img.onerror = function () {
    console.error("FAILED to load image through CDN.");
    document.body.innerHTML =
      "<div style='color:white;text-align:center;margin-top:40px;font-size:20px;'>Image failed to load even through CDN.<br>Check console.</div>";
};

img.src = panoramaURL;
</script>

</body>
</html>
