<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lex 360 Viewer</title>

<style>

/* ----------------------------------------------------
   GLOBAL
---------------------------------------------------- */

html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #000;
  font-family: Arial, sans-serif;
}

/* ----------------------------------------------------
   BLACK FADE-IN LAYER
---------------------------------------------------- */

#intro-blackout {
  position: fixed;
  inset: 0;
  background: #000;
  z-index: 3000;
  opacity: 1;
  pointer-events: none;
  transition: opacity 2s ease;
}

/* ----------------------------------------------------
   INTRO PANEL
---------------------------------------------------- */

#intro-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

#intro-panel {
  width: 45%;
  max-width: 480px;
  background: rgba(30,30,30,0.55);
  border-radius: 16px;
  padding: 22px;
  text-align: center;
  color: #e0e0e0;
}

/* ICON WOBBLE ANIMATION */
@keyframes lex3DWobble {
  0%, 100% {
    transform: rotateY(-8deg) rotateX(3deg);
  }
  50% {
    transform: rotateY(8deg) rotateX(-3deg);
  }
}

#intro-icon {
  width: 80px;
  height: 80px;
  margin-bottom: 12px;
  object-fit: contain;
  animation: lex3DWobble 3s ease-in-out infinite;
}

/* Divider */
#intro-divider {
  width: 60%;
  margin: 12px auto 18px auto;
  border: none;
  border-top: 1px solid #ffffffaa;
}

/* Instructions header */
#intro-panel b {
  font-size: 1.05rem;
  letter-spacing: 0.5px;
}

/* Pulsing dismiss text */
@keyframes pulseDismiss {
  0% { opacity: 0.3; }
  50% { opacity: 1; }
  100% { opacity: 0.3; }
}

#dismiss-text {
  margin-top: 18px;
  animation: pulseDismiss 2s infinite;
}

/* ----------------------------------------------------
   TOP PANELS (HIDDEN UNTIL DISMISS)
---------------------------------------------------- */

.top-panel {
  position: fixed;
  top: 14px;
  padding: 10px 16px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(8px);
  border-radius: 12px;
  color: #ddd;
  z-index: 1500;
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s;
}

#panel-left {
  left: 14px;
}
#panel-right {
  right: 14px;
}

/* ----------------------------------------------------
   QR BUTTON + FULLSCREEN BUTTON
---------------------------------------------------- */

.action-btn {
  position: fixed;
  bottom: 18px;
  right: 18px;
  background: rgba(255,255,255,0.14);
  backdrop-filter: blur(10px);
  padding: 10px 16px;
  border-radius: 14px;
  font-size: 0.9rem;
  color: #eee;
  cursor: pointer;
  z-index: 1500;
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s;
}

/* ----------------------------------------------------
   QR OVERLAY
---------------------------------------------------- */

#qr-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  z-index: 2500;
  display: none;
  align-items: center;
  justify-content: center;
}

#qr-content {
  padding: 14px;
  border-radius: 16px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(10px);
}

#qr-content img {
  width: 120px;
  height: 120px;
  object-fit: contain;
}

/* ----------------------------------------------------
   HOVER PREVIEW PANEL (separate layer)
---------------------------------------------------- */

#hover-preview {
  position: fixed;
  padding: 10px;
  background: rgba(255,255,255,0.14);
  backdrop-filter: blur(8px);
  border-radius: 12px;
  z-index: 2600;
  pointer-events: none;
  display: none;
}

#hover-preview img {
  width: 220px;
  height: auto;
  display: block;
}

/* Capsule hyperlink */
.link-capsule {
  background: rgba(255,255,255,0.15);
  padding: 4px 10px;
  border-radius: 10px;
  color: #ccc;
  cursor: pointer;
  display: inline-block;
  margin-top: 6px;
}

</style>
</head>
<body>

<!-- BLACK FADE-IN -->
<div id="intro-blackout"></div>

<!-- INTRO OVERLAY -->
<div id="intro-overlay">
  <div id="intro-panel">

    <img id="intro-icon" src="LexIconWhite,png.png">

    <p>
      Hi, I’m Lex. I build tools, visuals, and experiments that explore<br>
      light, perception, space, and technical research.
    </p>

    <hr id="intro-divider">

    <b>INSTRUCTIONS</b><br><br>

    • Pan around with mouse or touch.<br>
    • Scroll to zoom in/out.<br>
    • Hover over links for preview.<br><br>

    Here is my 360° drone video:  
    <span id="yt-link" class="link-capsule">here</span>

    <br><br><br>

    If you’d like to see my other work, tap the QR button.

    <p id="dismiss-text">(click anywhere to dismiss)</p>
  </div>
</div>

<!-- TOP PANELS -->
<div id="panel-left" class="top-panel">Lighting: Natural</div>
<div id="panel-right" class="top-panel">Location: California</div>

<!-- QR BUTTON -->
<div id="qr-btn" class="action-btn">QR</div>

<!-- FULLSCREEN BUTTON -->
<div id="fs-btn" class="action-btn" style="bottom: 70px;">Fullscreen</div>

<!-- QR OVERLAY -->
<div id="qr-overlay">
  <div id="qr-content">
    <img src="qr.png">
  </div>
</div>

<!-- HOVER PREVIEW -->
<div id="hover-preview">
  <img src="preview.jpg">
</div>

<!-- 360 VIEWER -->
<div id="viewer" style="width:100vw; height:100vh;"></div>

<script src="pannellum.js"></script>

<script>
/* ----------------------------------------------------
   INIT 360 VIEWER (with autoRotate)
---------------------------------------------------- */
pannellum.viewer('viewer', {
  type: 'equirectangular',
  panorama: 'your360.jpg',
  autoLoad: true,
  autoRotate: -1.2
});

/* ----------------------------------------------------
   FADE-IN OF BLACK LAYER
---------------------------------------------------- */
setTimeout(() => {
  document.getElementById("intro-blackout").style.opacity = "0";
}, 1000);

/* ----------------------------------------------------
   DISMISS INTRO
---------------------------------------------------- */
document.getElementById("intro-overlay").addEventListener("click", () => {

  document.getElementById("intro-overlay").style.display = "none";

  // reveal top panels + buttons
  document.querySelectorAll(".top-panel, .action-btn").forEach(el => {
    el.style.opacity = "1";
    el.style.pointerEvents = "auto";
  });
});

/* ----------------------------------------------------
   QR BUTTON
---------------------------------------------------- */
document.getElementById("qr-btn").onclick = () => {
  document.getElementById("qr-overlay").style.display = "flex";
};

document.getElementById("qr-overlay").onclick = () => {
  document.getElementById("qr-overlay").style.display = "none";
};

/* ----------------------------------------------------
   FULLSCREEN
---------------------------------------------------- */
document.getElementById("fs-btn").onclick = () => {
  document.documentElement.requestFullscreen();
};

/* ----------------------------------------------------
   HOVER PREVIEW
---------------------------------------------------- */
const preview = document.getElementById("hover-preview");
const ytLink = document.getElementById("yt-link");

ytLink.addEventListener("mouseenter", e => {
  preview.style.display = "block";
});
ytLink.addEventListener("mouseleave", e => {
  preview.style.display = "none";
});
ytLink.addEventListener("mousemove", e => {
  preview.style.left = (e.clientX + 20) + "px";
  preview.style.top = (e.clientY + 20) + "px";
});
</script>

</body>
</html>
